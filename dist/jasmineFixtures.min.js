/*! 
jasmineFixtures 1.0 2018-04-23T05:28:56.739Z
https://github.com/MassimoFoti/jasmineFixtures
Copyright 2017-2018 Massimo Foti (massimo@massimocorner.com)
Licensed under the Apache License, Version 2.0 | http://www.apache.org/licenses/LICENSE-2.0
 */
void 0===window.jasmineFixtures&&(window.jasmineFixtures={}),function(){"use strict";jasmineFixtures.version="1.0";const config={basePath:"fixtures/",containerId:"jasmine-fixtures"},styleNodes=[];jasmineFixtures.cache={},jasmineFixtures.clearCache=function(){jasmineFixtures.cache={}},jasmineFixtures.clearCSS=function(){styleNodes.forEach(function(element){null!==element.parentNode&&element.parentNode.removeChild(element)})},jasmineFixtures.clearHTML=function(){const container=getContainer();container.parentNode.removeChild(container)},jasmineFixtures.appendCSS=function(path){jasmineFixtures.preload(path),appendStyle(readFromCache(path))},jasmineFixtures.appendHTML=function(path){jasmineFixtures.preload(path),appendToContainer(readFromCache(path))},jasmineFixtures.loadCSS=function(path){jasmineFixtures.preload(path),jasmineFixtures.clearCSS(),appendStyle(readFromCache(path))},jasmineFixtures.loadHTML=function(path){jasmineFixtures.preload(path),loadIntoContainer(readFromCache(path))},jasmineFixtures.preload=function(path){"string"==typeof path&&(path=[path]),path.forEach(function(element){const fullUrl=assembleUrl(element);void 0===jasmineFixtures.cache[fullUrl]&&readIntoCache(fullUrl)})},jasmineFixtures.read=function(path){return jasmineFixtures.preload(path),readFromCache(path)},jasmineFixtures.setCSS=function(css){jasmineFixtures.clearCSS(),appendStyle(css)},jasmineFixtures.setHTML=function(html){loadIntoContainer(html)},jasmineFixtures.setup=function(options){return void 0!==options&&(void 0!==options.containerId&&(config.containerId=options.containerId),void 0!==options.basePath&&(config.basePath=options.basePath),"/"!==config.basePath[config.basePath.length-1]&&(config.basePath+="/")),config};const appendStyle=function(css){const cssNode=document.createElement("style");cssNode.innerHTML=css,styleNodes.push(cssNode),document.querySelector("head").appendChild(cssNode)},appendToContainer=function(html){getContainer().innerHTML+=html},assembleUrl=function(path){return config.basePath+path},getContainer=function(){const currentContainer=document.getElementById(config.containerId);if(null!==currentContainer)return currentContainer;{const container=document.createElement("div");return container.setAttribute("id",config.containerId),document.body.appendChild(container),container}},loadIntoContainer=function(html){getContainer().innerHTML=html},readFromCache=function(path){return jasmineFixtures.cache[assembleUrl(path)]},readIntoCache=function(url){const xhrOptions={success:function(response){null!==response.responseXML?jasmineFixtures.cache[url]=response.responseXML:!0===stringEndsWith(url,".json")?jasmineFixtures.cache[url]=JSON.parse(response.responseText):jasmineFixtures.cache[url]=response.responseText},error:function(response){throw"Failed to retrieve fixture at: "+url+" (status: "+response.status+")"}};new jasmineFixtures.xhr.Request(xhrOptions).send(url)},stringEndsWith=function(string,search){return string.substring(string.length-search.length,string.length)===search};jasmineFixtures.xhr={},jasmineFixtures.xhr.Request=function(options){const config={method:"GET",success:options.success,error:options.error,async:!1},self=this;self.xhr=new XMLHttpRequest;const assembleResponse=function(){return{status:self.xhr.status,statusText:self.xhr.statusText,responseText:self.xhr.responseText,responseXML:self.xhr.responseXML}},checkReadyState=function(){if(4===self.xhr.readyState){const httpStatus=self.xhr.status;httpStatus>=200&&httpStatus<=300||304===httpStatus?config.success(assembleResponse()):config.error(assembleResponse())}};this.send=function(url){self.xhr.open(config.method,url,config.async),self.xhr.onreadystatechange=checkReadyState,self.xhr.send(null)}}}(),jasmine.getEnv().afterEach(function(){"use strict";jasmineFixtures.clearCSS(),jasmineFixtures.clearHTML()});
//# sourceMappingURL=jasmineFixtures.min.js.map
